#!/usr/bin/env bash

set -ex

output_file=../src/reference/options.md

# Build options using the docs/gen devenv environment
options=$(./devenv-build.sh outputs.devenv-docs-options)

echo "[comment]: # (DO NOT MODIFY. This file was generated by devenv-generate-doc-options.)" >$output_file
echo "# devenv.nix" >>$output_file
echo >>$output_file
cat "$options" >>$output_file
# https://github.com/NixOS/nixpkgs/issues/224661
sed -i 's/\\\././g' $output_file
